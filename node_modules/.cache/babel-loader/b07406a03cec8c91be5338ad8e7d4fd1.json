{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Anubhav soni\\\\Desktop\\\\BIT WORK\\\\Web3Club\\\\newWeb3\\\\src\\\\context\\\\userState.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport UserContext from \"./UserContext\";\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserState = props => {\n  _s();\n\n  const provider = window.ethereum != null ? new ethers.providers.Web3Provider(window.ethereum) : null;\n  const signer = provider != null ? provider.getSigner() : null;\n  const [isConnected, setIsConnected] = useState(false);\n  const [userAccount, setUserAccount] = useState(\"0xE858f0370b101cD3F58E03F18BFA1240a591b5Fa\");\n  useEffect(() => {\n    if (signer != null) {\n      signer.getAddress().then(res => {\n        setUserAccount(res);\n        setIsConnected(true);\n      }).catch(err => {\n        setIsConnected(false);\n      });\n    } else {\n      setIsConnected(false);\n    }\n  }, [provider, signer]);\n  const iswalletAvailable = window.ethereum != null;\n\n  const login = async () => {\n    await provider.send(\"eth_requestAccounts\", []).then(res => {\n      setIsConnected(true);\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(\"doing this now..\");\n\n    if (signer != null) {\n      await signer.getAddress().then(res => {\n        console.log(res);\n        setUserAccount(res);\n        setIsConnected(true);\n      }).catch(err => {\n        setIsConnected(false);\n      });\n    }\n  };\n\n  const logout = async () => {\n    await provider.send(\"eth_requestAccounts\", []).then(res => {\n      setIsConnected(false);\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(\"doing this now..\");\n\n    if (signer != null) {\n      await signer.getAddress().then(res => {\n        console.log(res);\n        setUserAccount(res);\n        setIsConnected(false);\n      }).catch(err => {\n        setIsConnected(true);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      signer,\n      provider,\n      login,\n      iswalletAvailable,\n      isConnected,\n      userAccount,\n      setIsConnected\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserState, \"bE0A+OGBXQuzrfcloT/GEnUGznk=\");\n\n_c = UserState;\nexport default UserState;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserState\");","map":{"version":3,"names":["React","useState","useEffect","UserContext","ethers","UserState","props","provider","window","ethereum","providers","Web3Provider","signer","getSigner","isConnected","setIsConnected","userAccount","setUserAccount","getAddress","then","res","catch","err","iswalletAvailable","login","send","console","log","logout","children"],"sources":["C:/Users/Anubhav soni/Desktop/BIT WORK/Web3Club/newWeb3/src/context/userState.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserContext from \"./UserContext\";\r\n\r\nimport { ethers } from \"ethers\";\r\n\r\nconst UserState = (props) => {\r\n  const provider =\r\n    window.ethereum != null\r\n      ? new ethers.providers.Web3Provider(window.ethereum)\r\n      : null;\r\n  const signer = provider != null ? provider.getSigner() : null;\r\n\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [userAccount, setUserAccount] = useState(\r\n    \"0xE858f0370b101cD3F58E03F18BFA1240a591b5Fa\"\r\n  );\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (signer != null) {\r\n      signer\r\n        .getAddress()\r\n        .then((res) => {\r\n          setUserAccount(res);\r\n          setIsConnected(true);\r\n        })\r\n        .catch((err) => {\r\n          setIsConnected(false);\r\n        });\r\n    } else {\r\n      setIsConnected(false);\r\n    }\r\n  }, [provider, signer]);\r\n\r\n  const iswalletAvailable = window.ethereum != null;\r\n\r\n  const login = async () => {\r\n    await provider\r\n      .send(\"eth_requestAccounts\", [])\r\n      .then((res) => {\r\n        setIsConnected(true);\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    console.log(\"doing this now..\");\r\n\r\n    if (signer != null) {\r\n      await signer\r\n        .getAddress()\r\n        .then((res) => {\r\n          console.log(res);\r\n          setUserAccount(res);\r\n          setIsConnected(true);\r\n        })\r\n        .catch((err) => {\r\n          setIsConnected(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    await provider\r\n      .send(\"eth_requestAccounts\", [])\r\n      .then((res) => {\r\n        setIsConnected(false);\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    console.log(\"doing this now..\");\r\n\r\n    if (signer != null) {\r\n      await signer\r\n        .getAddress()\r\n        .then((res) => {\r\n          console.log(res);\r\n          setUserAccount(res);\r\n          setIsConnected(false);\r\n        })\r\n        .catch((err) => {\r\n          setIsConnected(true);\r\n        });\r\n    }\r\n  };\r\n  return (\r\n    <UserContext.Provider\r\n      value={{\r\n        signer,\r\n        provider,\r\n        login,\r\n        iswalletAvailable,\r\n        isConnected,\r\n        userAccount,\r\n        setIsConnected\r\n      }}\r\n    >\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserState;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}