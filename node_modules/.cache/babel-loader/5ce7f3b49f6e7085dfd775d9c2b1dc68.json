{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useContext, useEffect } from \"react\";\nimport UserContext from \"../../context/UserContext\";\nimport { getUserData, editUserData, getMyPosts, getMyClubs } from \"../apiCalls\";\nexport const ProfileScript = () => {\n  _s();\n\n  const user = useContext(UserContext);\n  const [userName, setUserName] = useState(\"Ramesh Kumar\");\n  const [userDescription, setUserDescription] = useState(\"Blockchain Enthusiast.\");\n  const [userPic, setUserPic] = useState(\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrhT96op_IVlSa_oL09-2NEihmsh95J_D_Nw&usqp=CAU\");\n  const [userPicRaw, setUserPicraw] = useState(\"\");\n  const [userPicPreview, setUserPicPreview] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [isEditting, setIsEditting] = useState(false);\n  const [myposts, setMyposts] = useState([]);\n  const [myClubs, setMyClubs] = useState([]);\n  useEffect(() => {\n    if (user.isConnected) {\n      poppulateUserData();\n    }\n  }, [user]);\n\n  const poppulateUserData = async () => {\n    getUserData(user.userAccount).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setUserName(res.data.name);\n          setUserDescription(res.data.description);\n          setUserPic(res.data.profilepic);\n          setUserPicPreview(res.data.profilepic);\n          poppulateMyPosts();\n        }\n      }\n    });\n  };\n\n  const poppulateMyPosts = async () => {\n    getMyPosts(user.userAccount).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setMyposts(res.data);\n          poppulateMyClubs();\n        }\n      }\n    });\n  };\n\n  const poppulateMyClubs = async () => {\n    getMyClubs(user.userAccount).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setMyClubs(res.data);\n        }\n      }\n    });\n  };\n\n  const rawImageToURL = async file => {\n    let filereader = new FileReader();\n    filereader.addEventListener(\"load\", () => {\n      setUserPicPreview(filereader.result);\n    });\n    filereader.readAsDataURL(file);\n  };\n\n  const handleSaveButton = (name, description) => {\n    // e.preventDefault();\n    setStatus(\"Updating profile...\");\n    createUserProfile(name, description, userPicRaw);\n  };\n\n  const createUserProfile = async (name, description, profilepic) => {\n    editUserData(name, user.userAccount, description, profilepic).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setStatus(\"\");\n          poppulateUserData();\n          setIsEditting(false);\n        } else {\n          setStatus(\"Something went wrong. Please try again.\");\n        }\n      } else {\n        setStatus(\"Something went wrong. Please try again.\");\n      }\n    });\n  };\n\n  return {\n    status,\n    userName,\n    setUserName,\n    userDescription,\n    setUserDescription,\n    userPic,\n    setUserPic,\n    userPicRaw,\n    setUserPicraw,\n    userPicPreview,\n    setUserPicPreview,\n    isEditting,\n    setIsEditting,\n    handleSaveButton,\n    poppulateUserData,\n    rawImageToURL,\n    myposts,\n    myClubs\n  };\n};\n\n_s(ProfileScript, \"nn/UDmrCRzkCVvwQHctWrlMXAUg=\");\n\n_c = ProfileScript;\nexport default ProfileScript;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileScript\");","map":{"version":3,"names":["React","useState","useContext","useEffect","UserContext","getUserData","editUserData","getMyPosts","getMyClubs","ProfileScript","user","userName","setUserName","userDescription","setUserDescription","userPic","setUserPic","userPicRaw","setUserPicraw","userPicPreview","setUserPicPreview","status","setStatus","isEditting","setIsEditting","myposts","setMyposts","myClubs","setMyClubs","isConnected","poppulateUserData","userAccount","then","res","data","name","description","profilepic","poppulateMyPosts","poppulateMyClubs","rawImageToURL","file","filereader","FileReader","addEventListener","result","readAsDataURL","handleSaveButton","createUserProfile"],"sources":["C:/Users/Anubhav soni/Desktop/BIT WORK/Web3Club/newWeb3/src/components/Profile/ProfileScript.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useContext, useEffect } from \"react\";\r\nimport UserContext from \"../../context/UserContext\";\r\nimport { getUserData, editUserData, getMyPosts, getMyClubs } from \"../apiCalls\";\r\n\r\nexport const ProfileScript = () => {\r\n  const user = useContext(UserContext);\r\n  const [userName, setUserName] = useState(\"Ramesh Kumar\");\r\n  const [userDescription, setUserDescription] = useState(\r\n    \"Blockchain Enthusiast.\"\r\n  );\r\n  const [userPic, setUserPic] = useState(\r\n    \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrhT96op_IVlSa_oL09-2NEihmsh95J_D_Nw&usqp=CAU\"\r\n  );\r\n  const [userPicRaw, setUserPicraw] = useState(\"\");\r\n  const [userPicPreview, setUserPicPreview] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [isEditting, setIsEditting] = useState(false);\r\n  const [myposts, setMyposts] = useState([]);\r\n  const [myClubs, setMyClubs] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (user.isConnected) {\r\n      poppulateUserData();\r\n    }\r\n  }, [user]);\r\n\r\n  const poppulateUserData = async () => {\r\n    getUserData(user.userAccount).then((res) => {\r\n      if (res !== \"Server error\") {\r\n        if (res.status === \"Success\") {\r\n          setUserName(res.data.name);\r\n          setUserDescription(res.data.description);\r\n          setUserPic(res.data.profilepic);\r\n          setUserPicPreview(res.data.profilepic);\r\n          poppulateMyPosts();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const poppulateMyPosts = async () => {\r\n    getMyPosts(user.userAccount).then((res) => {\r\n      if (res !== \"Server error\") {\r\n        if (res.status === \"Success\") {\r\n          setMyposts(res.data);\r\n          poppulateMyClubs();\r\n        }\r\n      }\r\n    });\r\n  };\r\n  const poppulateMyClubs = async () => {\r\n    getMyClubs(user.userAccount).then((res) => {\r\n      if (res !== \"Server error\") {\r\n        if (res.status === \"Success\") {\r\n          setMyClubs(res.data);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const rawImageToURL = async (file) => {\r\n    let filereader = new FileReader();\r\n    filereader.addEventListener(\"load\", () => {\r\n      setUserPicPreview(filereader.result);\r\n    });\r\n    filereader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSaveButton = (name, description) => {\r\n    // e.preventDefault();\r\n    setStatus(\"Updating profile...\");\r\n    createUserProfile(name, description, userPicRaw);\r\n  };\r\n\r\n  const createUserProfile = async (name, description, profilepic) => {\r\n    editUserData(name, user.userAccount, description, profilepic).then(\r\n      (res) => {\r\n        if (res !== \"Server error\") {\r\n          if (res.status === \"Success\") {\r\n            setStatus(\"\");\r\n            poppulateUserData();\r\n            setIsEditting(false);\r\n          } else {\r\n            setStatus(\"Something went wrong. Please try again.\");\r\n          }\r\n        } else {\r\n          setStatus(\"Something went wrong. Please try again.\");\r\n        }\r\n      }\r\n    );\r\n  };\r\n  return {\r\n    status,\r\n    userName,\r\n    setUserName,\r\n    userDescription,\r\n    setUserDescription,\r\n    userPic,\r\n    setUserPic,\r\n    userPicRaw,\r\n    setUserPicraw,\r\n    userPicPreview,\r\n    setUserPicPreview,\r\n    isEditting,\r\n    setIsEditting,\r\n    handleSaveButton,\r\n    poppulateUserData,\r\n    rawImageToURL,\r\n    myposts,\r\n    myClubs,\r\n  };\r\n};\r\n\r\nexport default ProfileScript;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}