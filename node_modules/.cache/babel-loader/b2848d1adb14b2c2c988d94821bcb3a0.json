{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { checkClubName, createClub } from \"../apiCalls\";\nimport { useState, useContext } from \"react\";\nimport UserContext from \"../../context/UserContext\";\nimport { useNavigate } from \"react-router-dom\";\nexport const CreateScript = props => {\n  _s();\n\n  const navigate = useNavigate();\n  const user = useContext(UserContext);\n  const [status, setStatus] = useState(\"\");\n  const [uploadedImage, setUploadedImage] = useState(\"\");\n  const [clubName, setClubName] = useState(\"\");\n  const [clubDescription, setClubDescription] = useState(\"\");\n  const [clubCategory, setClubCategory] = useState(\"ðŸŒ Web3\");\n\n  const handleCreateButton = async e => {\n    e.preventDefault();\n    setStatus(\"Checking data...\");\n    checkForEmptyFields();\n  };\n\n  const checkForEmptyFields = () => {\n    if (clubName === \"\") {\n      setStatus(\"Club name should not be empty\");\n    } else if (clubDescription === \"\") {\n      setStatus(\"Provide a description for your club.\");\n    } else {\n      checkforclubname();\n    }\n  };\n\n  const checkforclubname = async () => {\n    await checkClubName(clubName).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setStatus(\"This club already exists. Try with a different name.\");\n        } else {\n          setStatus(\"Creating club...\");\n          createmyClub();\n        }\n      } else {\n        setStatus(\"Something went wrong. Please try again.\");\n      }\n    });\n  };\n\n  const createmyClub = async () => {\n    // name, description, category, profilepic;\n    createClub(clubName, clubDescription, clubCategory, uploadedImage, user.userAccount).then(res => {\n      if (res !== \"Server error\") {\n        if (res.status === \"Success\") {\n          setStatus(\"Club created successfully. Redirecting to club page...\");\n          setTimeout(() => {\n            console.log(\"timeout happened.\" + \"/club/\" + res.data.id);\n            navigate(\"/club/\" + res.data.id);\n          }, 2000);\n        } else {\n          setStatus(\"Something went wrong. Please try again.\");\n        }\n      } else {\n        setStatus(\"Something went wrong. Please try again.\");\n      }\n    });\n  };\n\n  return {\n    status,\n    setStatus,\n    setUploadedImage,\n    setClubName,\n    setClubDescription,\n    setClubCategory,\n    handleCreateButton\n  };\n};\n\n_s(CreateScript, \"0dpA3lTreRcUgJRHITzqMnwYKTo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateScript;\nexport default CreateScript;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateScript\");","map":{"version":3,"names":["React","checkClubName","createClub","useState","useContext","UserContext","useNavigate","CreateScript","props","navigate","user","status","setStatus","uploadedImage","setUploadedImage","clubName","setClubName","clubDescription","setClubDescription","clubCategory","setClubCategory","handleCreateButton","e","preventDefault","checkForEmptyFields","checkforclubname","then","res","createmyClub","userAccount","setTimeout","console","log","data","id"],"sources":["C:/Users/Anubhav soni/Desktop/BIT WORK/Web3Club/newWeb3/src/components/Create/CreateScript.js"],"sourcesContent":["import React from \"react\";\r\nimport { checkClubName, createClub } from \"../apiCalls\";\r\nimport { useState, useContext } from \"react\";\r\nimport UserContext from \"../../context/UserContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const CreateScript = (props) => {\r\n  const navigate = useNavigate();\r\n  const user = useContext(UserContext);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [uploadedImage, setUploadedImage] = useState(\"\");\r\n  const [clubName, setClubName] = useState(\"\");\r\n  const [clubDescription, setClubDescription] = useState(\"\");\r\n  const [clubCategory, setClubCategory] = useState(\"ðŸŒ Web3\");\r\n\r\n  const handleCreateButton = async (e) => {\r\n    e.preventDefault();\r\n    setStatus(\"Checking data...\");\r\n    checkForEmptyFields();\r\n  };\r\n\r\n  const checkForEmptyFields = () => {\r\n    if (clubName === \"\") {\r\n      setStatus(\"Club name should not be empty\");\r\n    } else if (clubDescription === \"\") {\r\n      setStatus(\"Provide a description for your club.\");\r\n    } else {\r\n      checkforclubname();\r\n    }\r\n  };\r\n\r\n  const checkforclubname = async () => {\r\n    await checkClubName(clubName).then((res) => {\r\n      if (res !== \"Server error\") {\r\n        if (res.status === \"Success\") {\r\n          setStatus(\"This club already exists. Try with a different name.\");\r\n        } else {\r\n          setStatus(\"Creating club...\");\r\n          createmyClub();\r\n        }\r\n      } else {\r\n        setStatus(\"Something went wrong. Please try again.\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const createmyClub = async () => {\r\n    // name, description, category, profilepic;\r\n    createClub(\r\n      clubName,\r\n      clubDescription,\r\n      clubCategory,\r\n      uploadedImage,\r\n      user.userAccount\r\n    ).then((res) => {\r\n      if (res !== \"Server error\") {\r\n        if (res.status === \"Success\") {\r\n          setStatus(\"Club created successfully. Redirecting to club page...\");\r\n          setTimeout(() => {\r\n            console.log(\"timeout happened.\" + \"/club/\" + res.data.id);\r\n            navigate(\"/club/\" + res.data.id);\r\n          }, 2000);\r\n        } else {\r\n          setStatus(\"Something went wrong. Please try again.\");\r\n        }\r\n      } else {\r\n        setStatus(\"Something went wrong. Please try again.\");\r\n      }\r\n    });\r\n  };\r\n  return {\r\n    status,\r\n    setStatus,\r\n    setUploadedImage,\r\n    setClubName,\r\n    setClubDescription,\r\n    setClubCategory,\r\n    handleCreateButton,\r\n  };\r\n};\r\n\r\nexport default CreateScript;\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,aAA1C;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,OAArC;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,OAAO,MAAMC,YAAY,GAAIC,KAAD,IAAW;EAAA;;EACrC,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAMI,IAAI,GAAGN,UAAU,CAACC,WAAD,CAAvB;EACA,MAAM,CAACM,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACU,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAC,EAAD,CAAlD;EACA,MAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACc,eAAD,EAAkBC,kBAAlB,IAAwCf,QAAQ,CAAC,EAAD,CAAtD;EACA,MAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAAC,SAAD,CAAhD;;EAEA,MAAMkB,kBAAkB,GAAG,MAAOC,CAAP,IAAa;IACtCA,CAAC,CAACC,cAAF;IACAX,SAAS,CAAC,kBAAD,CAAT;IACAY,mBAAmB;EACpB,CAJD;;EAMA,MAAMA,mBAAmB,GAAG,MAAM;IAChC,IAAIT,QAAQ,KAAK,EAAjB,EAAqB;MACnBH,SAAS,CAAC,+BAAD,CAAT;IACD,CAFD,MAEO,IAAIK,eAAe,KAAK,EAAxB,EAA4B;MACjCL,SAAS,CAAC,sCAAD,CAAT;IACD,CAFM,MAEA;MACLa,gBAAgB;IACjB;EACF,CARD;;EAUA,MAAMA,gBAAgB,GAAG,YAAY;IACnC,MAAMxB,aAAa,CAACc,QAAD,CAAb,CAAwBW,IAAxB,CAA8BC,GAAD,IAAS;MAC1C,IAAIA,GAAG,KAAK,cAAZ,EAA4B;QAC1B,IAAIA,GAAG,CAAChB,MAAJ,KAAe,SAAnB,EAA8B;UAC5BC,SAAS,CAAC,sDAAD,CAAT;QACD,CAFD,MAEO;UACLA,SAAS,CAAC,kBAAD,CAAT;UACAgB,YAAY;QACb;MACF,CAPD,MAOO;QACLhB,SAAS,CAAC,yCAAD,CAAT;MACD;IACF,CAXK,CAAN;EAYD,CAbD;;EAeA,MAAMgB,YAAY,GAAG,YAAY;IAC/B;IACA1B,UAAU,CACRa,QADQ,EAERE,eAFQ,EAGRE,YAHQ,EAIRN,aAJQ,EAKRH,IAAI,CAACmB,WALG,CAAV,CAMEH,IANF,CAMQC,GAAD,IAAS;MACd,IAAIA,GAAG,KAAK,cAAZ,EAA4B;QAC1B,IAAIA,GAAG,CAAChB,MAAJ,KAAe,SAAnB,EAA8B;UAC5BC,SAAS,CAAC,wDAAD,CAAT;UACAkB,UAAU,CAAC,MAAM;YACfC,OAAO,CAACC,GAAR,CAAY,sBAAsB,QAAtB,GAAiCL,GAAG,CAACM,IAAJ,CAASC,EAAtD;YACAzB,QAAQ,CAAC,WAAWkB,GAAG,CAACM,IAAJ,CAASC,EAArB,CAAR;UACD,CAHS,EAGP,IAHO,CAAV;QAID,CAND,MAMO;UACLtB,SAAS,CAAC,yCAAD,CAAT;QACD;MACF,CAVD,MAUO;QACLA,SAAS,CAAC,yCAAD,CAAT;MACD;IACF,CApBD;EAqBD,CAvBD;;EAwBA,OAAO;IACLD,MADK;IAELC,SAFK;IAGLE,gBAHK;IAILE,WAJK;IAKLE,kBALK;IAMLE,eANK;IAOLC;EAPK,CAAP;AASD,CAzEM;;GAAMd,Y;UACMD,W;;;KADNC,Y;AA2Eb,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}